#!/bin/bash
# **************************************************************************** #
#                                                                              #
#                                                         :::      ::::::::    #
#    trash.sh                                           :+:      :+:    :+:    #
#                                                     +:+ +:+         +:+      #
#    By: mcanal <zboub@42.fr>                       +#+  +:+       +#+         #
#                                                 +#+#+#+#+#+   +#+            #
#    Created: 2015/02/12 20:45:01 by mcanal            #+#    #+#              #
#    Updated: 2016/08/23 23:11:43 by mcanal           ###   ########.fr        #
#                                                                              #
# **************************************************************************** #

set -e

DATE=$(date "+%y-%m-%d--%H-%M-%S")
for i in "$@"; do
    dir="$TRASH/$(readlink -f "$i" | sed 's/\//!/g')@$DATE"
    mkdir -p "$dir"
    mv -vi "$i" "$dir/${i##*/}"
done
